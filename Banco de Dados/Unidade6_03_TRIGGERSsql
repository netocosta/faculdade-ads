/*
Executa depois de algum processo de insert, update ou delete
*/

/* INSERT - BEFORE ANTES */
CREATE OR REPLACE TRIGGER VERIFICA_ESTADO_4
BEFORE INSERT ON TAB_ESTADO
FOR EACH ROW
BEGIN
    INSERT INTO TAB_LOG
    VALUES ('INSERT-B', 'NOVO: ' || :NEW.NM_UF);
END;

/* INSERT - AFTER (DEPOIS) */
CREATE OR REPLACE TRIGGER VERIFICA_ESTADO_3
AFTER INSERT ON TAB_ESTADO
FOR EACH ROW
BEGIN
    INSERT INTO TAB_LOG
    VALUES ('INSERT-A', 'NOVO: ' || :NEW.NM_UF);
END;

/* UPDATE - BEFORE (ANTES) */
CREATE OR REPLACE TRIGGER VERIFICA_ESTADO
BEFORE UPDATE OF NM_UF ON TAB_ESTADO
FOR EACH ROW
BEGIN
    INSERT INTO TAB_LOG
    VALUES ('UPDATE', 'ANTERIOR: ' || :OLD.NM_UF || ' - NOVO: ' || :NEW.NM_UF);
END;

/* UPDATE - AFTER (DEPOIS) */
CREATE OR REPLACE TRIGGER VERIFICA_ESTADO
AFTER UPDATE OF NM_UF ON TAB_ESTADO
FOR EACH ROW
BEGIN
    INSERT INTO TAB_LOG
    VALUES ('UPDATE', 'ANTERIOR: ' || :OLD.NM_UF || ' - NOVO: ' || :NEW.NM_UF);
END;

/* DELETE - BEFORE (ANTES) */
CREATE OR REPLACE TRIGGER VERIFICA_ESTADO_5
BEFORE DELETE ON TAB_ESTADO
FOR EACH ROW
BEGIN
    INSERT INTO TAB_LOG
    VALUES ('INSERT-B', 'ANTERIOR: ' || :OLD.NM_UF);
END;

/* DELETE - AFTER (DEPOIS) */
CREATE OR REPLACE TRIGGER VERIFICA_ESTADO_6
AFTER DELETE ON TAB_ESTADO
FOR EACH ROW
BEGIN
    INSERT INTO TAB_LOG
    VALUES ('INSERT-A', 'ANERIOR: ' || :OLD.NM_UF);
END;


/* outros comandos */
/*Desabilitando e Habilitando um Trigger Específico:*/
ALTER TRIGGER nome_da_trigger DISABLE;
ALTER TRIGGER nome_da_trigger ENABLE;

/*Desabilitando e Habilitando todos os Triggers de uma tabela:*/
ALTER TABLE nome_tabela DISABLE ALL TRIGGERS;
ALTER TABLE nome_tabela ENABLE ALL TRIGGERS;

/*Eliminando Triggers e Procedimentos:*/
DROP TRIGGER nome_trigger;
DROP PROCEDURE nome_procedure;

/* Lista todas as Triggers */
SELECT object_name, object_type FROM user_objects WHERE object_type =’TRIGGER’;
